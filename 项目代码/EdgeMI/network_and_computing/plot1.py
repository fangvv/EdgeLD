import matplotlib.pyplot as plt

# # 虚拟机全连接层
# flops_record = [19900, 72834, 125768, 178901, 231835, 284968, 337902, 390836, 443969, 496903, 550036, 602970, 655904, 709037, 761971, 814905, 73100, 267546, 461992, 657169, 851615, 1046792, 1241238, 1435684, 1630861, 1825307, 2020484, 2214930, 2409376, 2604553, 2798999, 2993445, 126300, 462258, 798216, 1135437, 1471395, 1808616, 2144574, 2480532, 2817753, 3153711, 3490932, 3826890, 4162848, 4500069, 4836027, 5171985, 179700, 657702, 1135704, 1615503, 2093505, 2573304, 3051306, 3529308, 4009107, 4487109, 4966908, 5444910, 5922912, 6402711, 6880713, 7358715, 232900, 852414, 1471928, 2093771, 2713285, 3335128, 3954642, 4574156, 5195999, 5815513, 6437356, 7056870, 7676384, 8298227, 8917741, 9537255, 286300, 1047858, 1809416, 2573837, 3335395, 4099816, 4861374, 5622932, 6387353, 7148911, 7913332, 8674890, 9436448, 10200869, 10962427, 11723985, 339500, 1242570, 2145640, 3052105, 3955175, 4861640, 5764710, 6667780, 7574245, 8477315, 9383780, 10286850, 11189920, 12096385, 12999455, 13902525, 392700, 1437282, 2481864, 3530373, 4574955, 5623464, 6668046, 7712628, 8761137, 9805719, 10854228, 11898810, 12943392, 13991901, 15036483, 16081065, 446100, 1632726, 2819352, 4010439, 5197065, 6388152, 7574778, 8761404, 9952491, 11139117, 12330204, 13516830, 14703456, 15894543, 17081169, 18267795, 499300, 1827438, 3155576, 4488707, 5816845, 7149976, 8478114, 9806252, 11139383, 12467521, 13800652, 15128790, 16456928, 17790059, 19118197, 20446335, 552700, 2022882, 3493064, 4968773, 6438955, 7914664, 9384846, 10855028, 12330737, 13800919, 15276628, 16746810, 18216992, 19692701, 21162883, 22633065, 605900, 2217594, 3829288, 5447041, 7058735, 8676488, 10288182, 11899876, 13517629, 15129323, 16747076, 18358770, 19970464, 21588217, 23199911, 24811605, 659100, 2412306, 4165512, 5925309, 7678515, 9438312, 11191518, 12944724, 14704521, 16457727, 18217524, 19970730, 21723936, 23483733, 25236939, 26990145, 712500, 2607750, 4503000, 6405375, 8300625, 10203000, 12098250, 13993500, 15895875, 17791125, 19693500, 21588750, 23484000, 25386375, 27281625, 29176875, 765700, 2802462, 4839224, 6883643, 8920405, 10964824, 13001586, 15038348, 17082767, 19119529, 21163948, 23200710, 25237472, 27281891, 29318653, 31355415, 818900, 2997174, 5175448, 7361911, 9540185, 11726648, 13904922, 16083196, 18269659, 20447933, 22634396, 24812670, 26990944, 29177407, 31355681, 33533955]
#
# time_record = [0.0006394386291503906, 9.3841552734375e-05, 5.1927566528320315e-05, 5.924701690673828e-05, 5.581378936767578e-05, 6.155967712402343e-05, 5.5956840515136716e-05, 7.281303405761718e-05, 6.570816040039063e-05, 0.00017683506011962892, 9.455680847167969e-05, 9.531974792480469e-05, 8.208751678466797e-05, 9.26971435546875e-05, 9.646415710449219e-05, 0.0001070261001586914, 5.028247833251953e-05, 5.2356719970703124e-05, 7.398128509521485e-05, 7.297992706298829e-05, 0.00014524459838867189, 0.00010807514190673828, 0.00014753341674804686, 0.00021417140960693358, 0.00018553733825683595, 0.0001993894577026367, 0.00035984516143798827, 0.0002572298049926758, 0.00043981075286865235, 0.0005717277526855469, 0.0003586292266845703, 0.00040004253387451174, 7.052421569824219e-05, 6.232261657714843e-05, 7.500648498535157e-05, 0.000238037109375, 0.00013175010681152344, 0.00017278194427490235, 0.0002168416976928711, 0.00031330585479736326, 0.00030896663665771487, 0.0004366159439086914, 0.0006799936294555664, 0.0005333423614501953, 0.0006050825119018555, 0.0006772518157958984, 0.0008708715438842773, 0.0009981393814086914, 7.665157318115234e-05, 7.436275482177734e-05, 0.00010166168212890624, 0.0001534700393676758, 0.0002919912338256836, 0.00038623809814453125, 0.0003643512725830078, 0.0004930734634399414, 0.0005028724670410156, 0.0009652137756347656, 0.0007396459579467774, 0.0010046243667602539, 0.0008445978164672852, 0.0009606599807739258, 0.0012341737747192383, 0.001437544822692871, 9.665489196777343e-05, 9.284019470214843e-05, 0.00021736621856689454, 0.00019237995147705078, 0.0002858161926269531, 0.0004039287567138672, 0.0010506391525268554, 0.0005781650543212891, 0.0007270574569702148, 0.0009647130966186524, 0.001076817512512207, 0.0009357929229736328, 0.0010246515274047851, 0.001487874984741211, 0.0014254331588745117, 0.001616525650024414, 0.00011878013610839843, 0.00010182857513427735, 0.00015151500701904297, 0.0002473592758178711, 0.0007504701614379882, 0.0007785797119140625, 0.0009582042694091797, 0.0009037256240844727, 0.0009312629699707031, 0.0013036727905273438, 0.0014197111129760742, 0.0012590885162353516, 0.001507878303527832, 0.0022464752197265624, 0.001854705810546875, 0.0020364761352539063, 0.00012471675872802735, 0.0001100778579711914, 0.000396418571472168, 0.0003729104995727539, 0.0004673480987548828, 0.0009839296340942382, 0.0007591962814331055, 0.001138448715209961, 0.0012141704559326173, 0.0014713048934936524, 0.0014751195907592774, 0.001660609245300293, 0.0015267372131347657, 0.0020244359970092774, 0.002147388458251953, 0.0024380207061767576, 0.00017442703247070313, 0.0001363039016723633, 0.0002501249313354492, 0.000690460205078125, 0.0005226612091064453, 0.0007678031921386719, 0.001067376136779785, 0.001549696922302246, 0.001227569580078125, 0.001497507095336914, 0.0016623258590698243, 0.0018055200576782226, 0.0019558191299438475, 0.0025469064712524414, 0.0026892662048339845, 0.0025920867919921875, 0.00016758441925048828, 0.00014493465423583984, 0.0003206968307495117, 0.0007647514343261719, 0.0006428003311157226, 0.0010593652725219727, 0.001166987419128418, 0.0013541698455810547, 0.0015720367431640626, 0.0019649267196655273, 0.0019797325134277345, 0.0020325899124145506, 0.002522397041320801, 0.002512407302856445, 0.0029009580612182617, 0.002932310104370117, 0.0005102157592773438, 0.00016036033630371094, 0.0003607511520385742, 0.0005234956741333007, 0.0011095523834228516, 0.0011128425598144532, 0.001327681541442871, 0.0015327930450439453, 0.0016434431076049806, 0.0019083499908447265, 0.0021282196044921874, 0.0023012638092041017, 0.002595186233520508, 0.0027742385864257812, 0.0032474279403686525, 0.0030339717864990234, 0.00018768310546875, 0.00018455982208251954, 0.0006637096405029297, 0.0005896329879760742, 0.0010417938232421876, 0.0012003660202026367, 0.001195812225341797, 0.0017527341842651367, 0.0017801523208618164, 0.002118992805480957, 0.0023706912994384765, 0.0024582624435424806, 0.0029686689376831055, 0.003271603584289551, 0.003431415557861328, 0.0038550138473510743, 0.0002045154571533203, 0.00021750926971435546, 0.0006126880645751954, 0.0007136821746826172, 0.0011574268341064454, 0.0016199588775634766, 0.0015578746795654296, 0.0024358272552490235, 0.0022978782653808594, 0.002545166015625, 0.00268709659576416, 0.0032314062118530273, 0.0031793832778930662, 0.0036235809326171874, 0.003766798973083496, 0.004131293296813965, 7.669925689697265e-05, 0.0003290653228759766, 0.0006116390228271485, 0.0008427619934082032, 0.0009871244430541993, 0.0013316154479980468, 0.001738739013671875, 0.0018047332763671876, 0.0022028207778930662, 0.002656984329223633, 0.0030098199844360352, 0.0036916494369506835, 0.0034691333770751954, 0.003706812858581543, 0.004198479652404785, 0.004216837882995606, 0.00025007724761962893, 0.00029964447021484374, 0.0005434036254882812, 0.0009918451309204102, 0.0011795759201049805, 0.0013498544692993164, 0.0017247676849365234, 0.002223634719848633, 0.00244903564453125, 0.0027929067611694334, 0.0030854463577270506, 0.003537416458129883, 0.003984665870666504, 0.003988790512084961, 0.004177522659301758, 0.004557204246520996, 0.0002578258514404297, 0.00030715465545654296, 0.0005628108978271484, 0.0009035587310791016, 0.001323843002319336, 0.0017689228057861327, 0.0019232273101806641, 0.002314043045043945, 0.002527332305908203, 0.0027703046798706055, 0.0034761428833007812, 0.003777289390563965, 0.004193305969238281, 0.004393672943115235, 0.004407143592834473, 0.004904747009277344, 0.0002899169921875, 0.0005749940872192382, 0.0009246349334716796, 0.0016245603561401366, 0.0015955448150634765, 0.001823735237121582, 0.0024088621139526367, 0.002633333206176758, 0.0029611587524414062, 0.003284001350402832, 0.003927421569824219, 0.004030036926269531, 0.0045945167541503905, 0.004993867874145508, 0.0052798748016357425, 0.0055596351623535155]
# # for i in range(len(flops_record)):
# #     if i % 4 == 1:
# #         print (flops_record[i], " ", time_record[i])
# flops_record_temp = []
# time_record_temp = []
# for i in  range(len(flops_record)):
#     if i % 3 == 0:
#         flops_record_temp.append(flops_record[i])
#         time_record_temp.append(time_record[i])
# plt.plot(flops_record, time_record, 'o')
# plt.xlabel("FLOPs")
# plt.tick_params(labelsize=23)
# plt.ylabel("s")
# # plt.plot(flops_record_temp, time_record_temp, 'o')
# plt.show()

# 虚拟机卷积层
flops_record = [179830784, 168766976, 158054400, 147693056, 137682944, 128024064, 118716416, 109760000, 101154816, 92900864, 84998144, 77446656, 70246400, 63397376, 56899584, 50753024, 44957696, 39513600, 34420736, 29679104, 25288704, 21249536, 17561600, 14224896, 11239424, 8605184, 6322176, 4390400, 2809856, 1580544, 702464, 175616, 3705798656, 3477805184, 3257049600, 3043531904, 2837252096, 2638210176, 2446406144, 2261840000, 2084511744, 1914421376, 1751568896, 1595954304, 1447577600, 1306438784, 1172537856, 1045874816, 926449664, 814262400, 709313024, 611601536, 521127936, 437892224, 361894400, 293134464, 231612416, 177328256, 130281984, 90473600, 57903104, 32570496, 14475776, 3618944, 7411597312, 6955610368, 6514099200, 6087063808, 5674504192, 5276420352, 4892812288, 4523680000, 4169023488, 3828842752, 3503137792, 3191908608, 2895155200, 2612877568, 2345075712, 2091749632, 1852899328, 1628524800, 1418626048, 1223203072, 1042255872, 875784448, 723788800, 586268928, 463224832, 354656512, 260563968, 180947200, 115806208, 65140992, 28951552, 7237888, 14810349568, 13899165952, 13016908800, 12163578112, 11339173888, 10543696128, 9777144832, 9039520000, 8330821632, 7651049728, 7000204288, 6378285312, 5785292800, 5221226752, 4686087168, 4179874048, 3702587392, 3254227200, 2834793472, 2444286208, 2082705408, 1750051072, 1446323200, 1171521792, 925646848, 708698368, 520676352, 361580800, 231411712, 130169088, 57852928, 14463232, 29620699136, 27798331904, 26033817600, 24327156224, 22678347776, 21087392256, 19554289664, 18079040000, 16661643264, 15302099456, 14000408576, 12756570624, 11570585600, 10442453504, 9372174336, 8359748096, 7405174784, 6508454400, 5669586944, 4888572416, 4165410816, 3500102144, 2892646400, 2343043584, 1851293696, 1417396736, 1041352704, 723161600, 462823424, 260338176, 115705856, 28926464, 59215708160, 55572554240, 52045056000, 48633213440, 45337026560, 42156495360, 39091619840, 36142400000, 33308835840, 30590927360, 27988674560, 25502077440, 23131136000, 20875850240, 18736220160, 16712245760, 14803927040, 13011264000, 11334256640, 9772904960, 8327208960, 6997168640, 5782784000, 4684055040, 3700981760, 2833564160, 2081802240, 1445696000, 925245440, 520450560, 231311360, 57827840, 118431416320, 111145108480, 104090112000, 97266426880, 90674053120, 84312990720, 78183239680, 72284800000, 66617671680, 61181854720, 55977349120, 51004154880, 46262272000, 41751700480, 37472440320, 33424491520, 29607854080, 26022528000, 22668513280, 19545809920, 16654417920, 13994337280, 11565568000, 9368110080, 7401963520, 5667128320, 4163604480, 2891392000, 1850490880, 1040901120, 462622720, 115655680]

time_record = [0.06634354591369629, 0.03330421447753906, 0.011914253234863281, 0.0067484378814697266, 0.008852005004882812, 0.00603032112121582, 0.00533747673034668, 0.006578207015991211, 0.007306814193725586, 0.004081010818481445, 0.003962993621826172, 0.0036840438842773438, 0.004088640213012695, 0.0031075477600097656, 0.0027866363525390625, 0.0031669139862060547, 0.0019965171813964844, 0.0017693042755126953, 0.0015702247619628906, 0.0013523101806640625, 0.0011692047119140625, 0.0011920928955078125, 0.0009462833404541016, 0.00070953369140625, 0.0006155967712402344, 0.0005843639373779297, 0.0010945796966552734, 0.001222848892211914, 0.00041866302490234375, 0.00032901763916015625, 0.0003323554992675781, 0.00028252601623535156, 0.10769462585449219, 0.11269664764404297, 0.06567549705505371, 0.06012082099914551, 0.05519390106201172, 0.05444526672363281, 0.0501103401184082, 0.05469226837158203, 0.030710935592651367, 0.02520895004272461, 0.029233455657958984, 0.03168845176696777, 0.022201061248779297, 0.022371292114257812, 0.016506433486938477, 0.018421173095703125, 0.014423131942749023, 0.014242172241210938, 0.010379552841186523, 0.00923299789428711, 0.006764411926269531, 0.007969141006469727, 0.0065479278564453125, 0.004925727844238281, 0.004309415817260742, 0.0030133724212646484, 0.0021140575408935547, 0.0015158653259277344, 0.0013926029205322266, 0.0007371902465820312, 0.0005991458892822266, 0.00047397613525390625, 0.21402311325073242, 0.18819689750671387, 0.13610172271728516, 0.08837699890136719, 0.08358979225158691, 0.07248425483703613, 0.08158111572265625, 0.06052350997924805, 0.06885170936584473, 0.05087685585021973, 0.04832172393798828, 0.05020499229431152, 0.03982138633728027, 0.036839962005615234, 0.03213238716125488, 0.02967214584350586, 0.025230884552001953, 0.021741390228271484, 0.018296480178833008, 0.017731428146362305, 0.013312339782714844, 0.01249241828918457, 0.009484052658081055, 0.00877833366394043, 0.0059430599212646484, 0.004851341247558594, 0.0037703514099121094, 0.002866506576538086, 0.0019643306732177734, 0.0014111995697021484, 0.0009102821350097656, 0.0006878376007080078, 0.31790614128112793, 0.30469202995300293, 0.21507596969604492, 0.19291949272155762, 0.1810624599456787, 0.16516637802124023, 0.15497851371765137, 0.14368152618408203, 0.10500907897949219, 0.09884810447692871, 0.10268521308898926, 0.12181401252746582, 0.08947920799255371, 0.06685590744018555, 0.0692141056060791, 0.06682205200195312, 0.048753976821899414, 0.045325279235839844, 0.03855609893798828, 0.03184962272644043, 0.031742095947265625, 0.0230255126953125, 0.02064681053161621, 0.01592087745666504, 0.013851165771484375, 0.010133981704711914, 0.0070819854736328125, 0.004896879196166992, 0.004227399826049805, 0.002180337905883789, 0.0011470317840576172, 0.0007572174072265625, 0.7896482944488525, 0.78741455078125, 0.4461536407470703, 0.3832724094390869, 0.34978365898132324, 0.3405599594116211, 0.3453543186187744, 0.2992238998413086, 0.2569153308868408, 0.25367116928100586, 0.21730780601501465, 0.1657400131225586, 0.15042328834533691, 0.13966679573059082, 0.12716937065124512, 0.11474919319152832, 0.09891533851623535, 0.08988499641418457, 0.07898426055908203, 0.06610321998596191, 0.05424022674560547, 0.045556068420410156, 0.039543867111206055, 0.032921791076660156, 0.02357316017150879, 0.018657684326171875, 0.013797760009765625, 0.010826349258422852, 0.007250785827636719, 0.006920814514160156, 0.0067484378814697266, 0.0018186569213867188, 1.0619800090789795, 0.9967653751373291, 0.6911847591400146, 0.6595351696014404, 0.6701350212097168, 0.646613597869873, 0.5876600742340088, 0.5160486698150635, 0.47377490997314453, 0.4261798858642578, 0.3732337951660156, 0.3306879997253418, 0.307384729385376, 0.3186032772064209, 0.23900437355041504, 0.21200275421142578, 0.19103288650512695, 0.18599414825439453, 0.14953041076660156, 0.12592864036560059, 0.1086113452911377, 0.09461069107055664, 0.07610583305358887, 0.06429839134216309, 0.05332446098327637, 0.041819095611572266, 0.02658534049987793, 0.022084951400756836, 0.02695751190185547, 0.023329973220825195, 0.02258157730102539, 0.009038925170898438, 2.119537115097046, 1.9041101932525635, 1.403899908065796, 1.41512131690979, 1.2897334098815918, 1.1668360233306885, 1.1054422855377197, 0.9510059356689453, 0.8922858238220215, 0.8147459030151367, 0.7861716747283936, 0.7225456237792969, 0.662625789642334, 0.5547409057617188, 0.5049052238464355, 0.45470571517944336, 0.43078136444091797, 0.3860921859741211, 0.2932252883911133, 0.2537364959716797, 0.21019554138183594, 0.17649245262145996, 0.1447737216949463, 0.12107324600219727, 0.10448980331420898, 0.07780838012695312, 0.09885287284851074, 0.043985605239868164, 0.06582069396972656, 0.028922557830810547, 0.01458883285522461, 0.011091470718383789]

for i in range(len(flops_record)):
    if i % 1 == 0:
        print (flops_record[i], " ", time_record[i])
flops_record_temp = []
time_record_temp = []
for i in  range(len(flops_record)):
    if i % 2 == 0:
        flops_record_temp.append(flops_record[i])
        time_record_temp.append(time_record[i])
plt.plot(flops_record, time_record, 'o')
plt.xlabel("FLOPs")
plt.ylabel("s")
# plt.plot(flops_record_temp, time_record_temp, 'o')
plt.show()
